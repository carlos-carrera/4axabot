var request = require('request');
var _ = require('lodash');

var Weather = function() {

};

Weather.prototype.getWeather = function(location, cb) {
    var options = {
        url: 'http://api.openweathermap.org/data/2.5/weather?q='+location+
          '&APPID='+process.env.OPEN_WEATHER_API_ID+'&units=metric',
        method: 'GET'
    };
    request(options, function(error, response, body) {
        if (error) {
            return cb(error);
        }
        body = JSON.parse(body);
        return cb(null, body);
    });
};

var instance = new Weather();
module.exports = instance;